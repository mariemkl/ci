version: 2
jobs:
  build:
    
    working_directory: ~/ci

    docker:
      - image: circleci/openjdk:8-jdk-browsers

    steps:

      - checkout
      
      - run:
         name: give chmod permission to build
         command: chmod +x ./scripts/build.sh
      
      - run:
          name: build the maven project
          command: ./scripts/build.sh
          
  test:   
    docker:
      - image: circleci/openjdk:8-jdk
      
    steps:
      - run:
         name: give chmod permission to test
         command: chmod +x ./scripts/test.sh 
         
      - run:
          name: test the maven project
          command: ./scripts/test.sh 
          
  deploy:        
    docker:
    
      - image: circleci/openjdk:8-jdk
     
    steps:
      - run:
         name: give chmod permission to deploy
         command: chmod +x ./scripts/deploy.sh 
         
      - run:
          name: deploy the maven project
          command: ./scripts/deploy.sh 
          
          

workflows:
  version: 2
  build_and_test:
    jobs:
      - build
